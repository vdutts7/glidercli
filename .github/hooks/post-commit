#!/bin/bash
# post-commit hook - auto push tags after npm version creates them
# npm version patch/minor/major creates a commit AND a tag

# Check if the last commit was from npm version (has version in message)
LAST_MSG=$(git log -1 --pretty=%B)

if [[ "$LAST_MSG" =~ ^[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
    echo "ðŸ“¦ Detected npm version commit: $LAST_MSG"
    echo "ðŸ·ï¸  Pushing tag v$LAST_MSG..."
    git push --tags 2>/dev/null &
    echo "âœ“ Tag push triggered (background)"
fi
